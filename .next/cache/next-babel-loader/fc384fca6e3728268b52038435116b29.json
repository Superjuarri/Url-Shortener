{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\n\nvar Pageres = require('pageres');\n\nvar fetchUrlData = function fetchUrlData(url) {\n  var urlData, screenshot;\n  return _regeneratorRuntime.async(function fetchUrlData$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(fetch('https://rel.ink/api/links/', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: _JSON$stringify({\n              url: url\n            })\n          }).then(function (res) {\n            return res.json();\n          })[\"catch\"](function (err) {\n            return err;\n          }));\n\n        case 2:\n          urlData = _context.sent;\n          _context.next = 5;\n          return _regeneratorRuntime.awrap(new Pageres({\n            delay: 2\n          }).src('https://github.com/sindresorhus/pageres', ['1024x768'], {\n            crop: false\n          }).run());\n\n        case 5:\n          screenshot = _context.sent;\n          return _context.abrupt(\"return\", {\n            urlData: urlData,\n            screenshot: screenshot\n          });\n\n        case 7:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n};\n\nexport default {\n  fetchUrlData: fetchUrlData\n};","map":{"version":3,"sources":["/home/superjuarri/apps/url-shortener/lib/fetchUrlData.js"],"names":["Pageres","require","fetchUrlData","url","fetch","method","headers","body","then","res","json","err","urlData","delay","src","crop","run","screenshot"],"mappings":";;;AAAA,IAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AAEA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAAMC,GAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CACGC,KAAK,CAAC,4BAAD,EAA+B;AACxDC,YAAAA,MAAM,EAAE,MADgD;AAExDC,YAAAA,OAAO,EAAE;AACP,8BAAgB;AADT,aAF+C;AAKxDC,YAAAA,IAAI,EAAE,gBAAe;AACnBJ,cAAAA,GAAG,EAAEA;AADc,aAAf;AALkD,WAA/B,CAAL,CASnBK,IATmB,CASd,UAAAC,GAAG;AAAA,mBAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,WATW,WAUb,UAAAC,GAAG;AAAA,mBAAIA,GAAJ;AAAA,WAVU,CADH;;AAAA;AACbC,UAAAA,OADa;AAAA;AAAA,2CAaM,IAAIZ,OAAJ,CAAY;AAAEa,YAAAA,KAAK,EAAE;AAAT,WAAZ,EACtBC,GADsB,CAClB,yCADkB,EACyB,CAAC,UAAD,CADzB,EACuC;AAC5DC,YAAAA,IAAI,EAAE;AADsD,WADvC,EAKtBC,GALsB,EAbN;;AAAA;AAabC,UAAAA,UAba;AAAA,2CAoBZ;AAAEL,YAAAA,OAAO,EAAPA,OAAF;AAAWK,YAAAA,UAAU,EAAVA;AAAX,WApBY;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAArB;;AAuBA,eAAe;AAAEf,EAAAA,YAAY,EAAZA;AAAF,CAAf","sourcesContent":["const Pageres = require('pageres')\n\nconst fetchUrlData = async url => {\n  const urlData = await fetch('https://rel.ink/api/links/', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      url: url\n    })\n  })\n    .then(res => res.json())\n    .catch(err => err)\n\n  const screenshot = await new Pageres({ delay: 2 })\n    .src('https://github.com/sindresorhus/pageres', ['1024x768'], {\n      crop: false\n    })\n\n    .run()\n\n  return { urlData, screenshot }\n}\n\nexport default { fetchUrlData }\n"]},"metadata":{},"sourceType":"module"}